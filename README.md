# Chrome ブックマーク整理ツール

Chrome ブックマークファイルを読み込み、リンク切れのチェックと不要なブックマークの削除を支援するクライアントサイド完結型のWebアプリケーションです。

![アプリケーション画面](https://img.shields.io/badge/status-active-brightgreen)
![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue)
![License](https://img.shields.io/badge/license-MIT-green)

## 🎯 主な機能

### ✅ ファイル読み込み機能
- Chrome ブックマークファイル（`Bookmarks`）の読み込み
- JSON形式の自動検証
- エラーハンドリングと分かりやすいメッセージ表示

### 🌲 ブックマーク表示機能
- ツリー形式での階層表示
- フォルダとブックマークを全展開
- チェックボックスによる削除対象の選択

### 🔍 リンクチェック機能
- 全ブックマークURLの一括確認
- **😊** : 正常なレスポンス（2xx）
- **💀** : ページが存在しない（404） - 自動でチェック
- **数値** : その他のHTTPステータスコード
- **CORS** : CORS制限でブロック
- **TIME** : タイムアウト

### 🔄 再チェック機能
- エラーのあるブックマークのみを再確認
- エラーブックマークのみを表示（正常なものは非表示）
- ブックマーク名がクリック可能なリンクに変更
- 別タブでサイトを開いて目視確認が可能

### 💾 保存機能
- 選択したブックマークを除外
- 新しいファイルとして保存（`Bookmarks_YYYYMMDD.json`）
- 元ファイルの上書きなし

### 📊 統計情報表示
- **総数**: 全ブックマーク数
- **😊**: 正常なブックマーク数
- **💀**: 404エラーのブックマーク数
- **エラー**: その他エラーのブックマーク数
- **選択**: チェックされたブックマーク数

### 🎨 ユーザビリティ
- 固定ヘッダー（スクロールしてもボタンが見える）
- リアルタイム統計更新
- プログレスバーによる進捗表示
- レスポンシブデザイン（モバイル対応）

## 🚀 使用方法

### 1. アプリケーションの起動
```bash
# 開発環境で実行する場合
npm install
npm run dev
```

または、ブラウザで直接 `index.html` を開いてください。

### 2. ブックマークファイルの読み込み
1. **「ブックマークファイルを開く」** ボタンをクリック
2. Chrome の `Bookmarks` ファイルを選択
   - Windows: `%LOCALAPPDATA%\Google\Chrome\User Data\Default\Bookmarks`
   - Mac: `~/Library/Application Support/Google/Chrome/Default/Bookmarks`
   - Linux: `~/.config/google-chrome/Default/Bookmarks`

### 3. リンクチェックの実行
1. **「確認する」** ボタンをクリック
2. 全ブックマークのリンクチェックが開始
3. 結果がアイコンで表示される
4. 404エラーのブックマークは自動的にチェック

### 4. 再チェック（必要に応じて）
1. エラーがある場合、**「再チェック」** ボタンが有効化
2. クリックするとエラーのあるブックマークのみが表示
3. ブックマーク名をクリックして目視確認が可能

### 5. 不要なブックマークの保存
1. 削除したいブックマークにチェック
2. **「保存する」** ボタンをクリック
3. 新しいファイルがダウンロード

## 🏗️ 技術仕様

### 開発環境
- **言語**: TypeScript 5.0
- **フロントエンド**: HTML5, CSS3
- **実行環境**: モダンブラウザ（Chrome, Firefox, Edge）
- **処理方式**: クライアントサイド完結型

### パフォーマンス最適化
- **同時接続制限**: 5リクエスト並列
- **タイムアウト**: 30秒（no-cors）/ 20秒（通常）
- **非同期処理**: Promise ベースのキュー処理
- **メモリ効率**: 必要最小限のDOM操作

### セキュリティ
- **プライバシー保護**: 全処理がブラウザ内で完結
- **外部送信なし**: ブックマーク情報の外部流出なし
- **CORS対応**: 制限を考慮した安全な実装

## 📁 プロジェクト構造

```
Bookmarkmanager/
├── src/
│   └── main.ts          # メインのTypeScriptファイル
├── dist/                # コンパイル済みJavaScript
├── doc/                 # ドキュメント
│   ├── 要件定義書.md
│   └── 外部仕様書.md
├── index.html           # メインHTMLファイル
├── styles.css           # スタイルシート
├── package.json         # プロジェクト設定
├── tsconfig.json        # TypeScript設定
└── README.md           # このファイル
```

## 🛠️ 開発コマンド

```bash
# 依存関係のインストール
npm install

# TypeScriptのビルド
npm run build

# ファイル変更の監視（自動ビルド）
npm run watch

# ローカルサーバーの起動
npm run serve

# 開発モード（自動ビルド + サーバー）
npm run dev
```

## 🔧 カスタマイズ

### タイムアウト時間の変更
`src/main.ts` の以下の部分を修正：

```typescript
// no-corsモードのタイムアウト（現在30秒）
setTimeout(() => controller.abort(), 30000);

// 通常モードのタイムアウト（現在20秒）
signal: AbortSignal.timeout(20000)
```

### 同時接続数の変更
`src/main.ts` の以下の部分を修正：

```typescript
// 同時接続数（現在5）
const concurrencyLimit = 5;
```

## 🐛 トラブルシューティング

### よくある問題

**Q: 「無効なブックマークファイルです」と表示される**
A: Chrome の正しい `Bookmarks` ファイルを選択してください。拡張子は不要です。

**Q: ほとんどのリンクが「CORS」になる**
A: ブラウザのセキュリティ制限による正常な動作です。「再チェック」で目視確認してください。

**Q: リンクチェックが遅い**
A: 大量のブックマークの場合、時間がかかります。同時接続数を調整できます。

**Q: ボタンが押せない**
A: ファイル読み込み後に各ボタンが有効化されます。エラーがない場合、再チェックボタンは無効です。

## 📄 ライセンス

MIT License

## 🤝 貢献

Issues や Pull Requests は歓迎します。

## 📞 サポート

問題が発生した場合は、GitHub Issues でお知らせください。

---

**注意**: このアプリケーションは教育目的で作成されました。重要なブックマークは事前にバックアップを取ることをお勧めします。